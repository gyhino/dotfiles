# vim:ft=zsh

umask 022
limit coredumpsize 0
bindkey -e

autoload -Uz colors && colors
autoload -Uz is-at-least
autoload -Uz history-search-end

export HISTFILE="${HOME}/.zsh_history"
export HISTSIZE=1000000
export SAVEHIST=1000000

[[ -n $VIMRUNTIME ]] && {
    return
}

# do not execute `tmux`, when use terminal jetbrains-ide
[[ -z $TERMINAL_EMULATOR ]] && {
    source tmuxx
}

[[ -s ~/.zplug/init.zsh ]] || {
    curl -sL https://raw.githubusercontent.com/zplug/installer/master/installer.zsh| zsh
}

export ZPLUG_LOADFILE=~/.zsh/zplug.zsh
source ~/.zplug/init.zsh

# disabled for performance
#if ! zplug check --verbose; then
#    printf "Install? [y/N]: "
#    if read -q; then
#        echo; zplug install
#    fi
#fi

zplug load

# force setup bin-path
path=($ZPLUG_BIN $path)

if [[ -f ~/.zshrc.local ]]; then
    source ~/.zshrc.local
fi
